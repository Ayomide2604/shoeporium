{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% block content %}
{% include 'partials/alert.html' %}

<div class="site-section">
    <div class="container">
        <button class="btn btn-secondary btn-sm mb-3"
            hx-get="{{ request.META.HTTP_REFERER|default:'/default-url' }}"
            hx-target="#site-wrap"
            hx-push-url="true">
            <h5 class="display-7 text-dark">Go Back</h5>
        </button>

        <div class="row">
            <!-- Product Image & Details -->
            <div class="col-lg-6 col-md-6 col-sm-12">
                {% if shoe %}
                <article class="card">
                    <div hx-get="{% url 'product' shoe.id %}" hx-target="#site-wrap" class="card__img">
                        <img class="img-fluid"
                            {% if shoe.featured_image %}
                                src="{{ shoe.featured_image.url }}" 
                            {% else %}
                                src="{% static 'images/default.png' %}"        
                            {% endif %} 
                            alt="{{ shoe.name }}">
                    </div>
                </article>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12">
                <h2 class="text-black">{{ shoe.name | title }}</h2>
                <p class="mb-4">{{ shoe.description }}</p>
                <p><strong class="text-primary h4">â‚¦{{ shoe.price | intcomma }}</strong></p>

                <!-- Quantity Selector -->
                <div class="mb-4">
                    <div class="input-group" style="max-width: 120px;">
                        <div class="input-group-prepend">
                            <button class="btn btn-outline-primary js-btn-minus" type="button">&minus;</button>
                        </div>
                        <input type="text" class="form-control text-center" value="1">
                        <div class="input-group-append">
                            <button class="btn btn-outline-primary js-btn-plus" type="button">&plus;</button>
                        </div>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="d-flex flex-column flex-md-row">
                    <a hx-post="{% url 'add_to_cart' shoe.id %}"
                        hx-headers='{"X-CSRFToken": "{{ csrf_token }}" }'
                        hx-target="#modalBody"
                        data-bs-toggle="modal"
                        data-bs-target="#cartModal"
                        class="btn btn-primary btn-sm height-auto px-4 py-3 mb-2 mb-md-0 me-md-2">
                        
                        <span class="icon-shopping-bag"></span>
                    </a>

                    <a href="#" class="btn btn-outline-danger btn-sm height-auto px-4 py-3">
                        <span class="icon-heart-o"></span> 
                    </a>
                </div>
            </div>
            {% else %}
            <p class="text-center text-danger">No Products Available</p>
            {% endif %}
        </div>
    </div>
</div>

<!-- Featured Products Section -->
<div class="site-section block-3 site-blocks-2">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-7 site-section-heading text-center pt-4">
                <h2>Featured Products</h2>
            </div>
        </div>

        <div class="row">
            <!-- Featured Product 1 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                <div class="item-entry">
                    <a href="#" class="product-item d-block">
                        <img src="{% static 'images/model_1.png' %}" class="img-fluid">
                    </a>
                    <h2 class="item-title"><a href="#">Smooth Cloth</a></h2>
                    <strong class="item-price"><del>$46.00</del> $28.00</strong>
                </div>
            </div>

            <!-- Featured Product 2 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                <div class="item-entry">
                    <a href="#" class="product-item d-block">
                        <img src="{% static 'images/prod_3.png' %}" class="img-fluid">
                    </a>
                    <h2 class="item-title"><a href="#">Blue Shoe High Heels</a></h2>
                    <strong class="item-price"><del>$46.00</del> $28.00</strong>
                </div>
            </div>

            <!-- Featured Product 3 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                <div class="item-entry">
                    <a href="#" class="product-item d-block">
                        <img src="{% static 'images/model_5.png' %}" class="img-fluid">
                    </a>
                    <h2 class="item-title"><a href="#">Denim Jacket</a></h2>
                    <strong class="item-price"><del>$46.00</del> $28.00</strong>
                </div>
            </div>

            <!-- Featured Product 4 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                <div class="item-entry">
                    <a href="#" class="product-item d-block">
                        <img src="{% static 'images/prod_1.png' %}" class="img-fluid">
                    </a>
                    <h2 class="item-title"><a href="#">Leather Green Bag</a></h2>
                    <strong class="item-price"><del>$46.00</del> $28.00</strong>
                </div>
            </div>

            <!-- Featured Product 5 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                <div class="item-entry">
                    <a href="#" class="product-item d-block">
                        <img src="{% static 'images/model_7.png' %}" class="img-fluid">
                    </a>
                    <h2 class="item-title"><a href="#">Yellow Jacket</a></h2>
                    <strong class="item-price">$58.00</strong>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
